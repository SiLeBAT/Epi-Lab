<!-- the register component template contains a simple registration form with fields for
first name, last name, username and password. It displays validation messages for invalid fields
when the submit button is clicked. On submit the register() method is called if the form is valid. -->


<form [formGroup]="registerForm" (ngSubmit)="onRegister()" novalidate>

  <mat-form-field class="mibi-register-field">
    <input type="text" matInput placeholder="Wählen Sie Ihr Institut" formControlName="institution" autocomplete="off"
      required [matAutocomplete]="autoGroup">
    <mat-autocomplete #autoGroup="matAutocomplete">
      <mat-option class="mibi-register-mat-option" *ngFor="let institution of filteredOptions | async" [value]="institution">
        {{institution}}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>

  <mat-form-field class="mibi-register-field">
    <input matInput placeholder="Vorname" name="firstName" formControlName="firstName" required>
  </mat-form-field>

  <mat-form-field class="mibi-register-field">
    <input matInput placeholder="Nachname" name="lastName" formControlName="lastName" required>
  </mat-form-field>

  <mat-form-field class="mibi-register-field">
    <input matInput placeholder="Email" name="email" formControlName="email" required>
    <mat-error class="mibi-register-field__error" *ngIf="registerForm.controls.email.errors?.email">Muss eine gültige Email sein.</mat-error>
  </mat-form-field>

  <mat-form-field class="mibi-register-field">
    <input matInput placeholder="Passwort" type="password" name="password1" formControlName="password1" required>
    <mat-error class="mibi-register-field__error" *ngIf="registerForm.controls.password1.errors?.minlength">Zu schwaches oder zu kurzes Passwort.</mat-error>
  </mat-form-field>

  <div class="mibi-register-strength-meter">
    <password-strength-meter [password]="registerForm.value.password1" (strengthChange)="doStrengthChange($event)">
    </password-strength-meter>
  </div>

  <mat-form-field class="mibi-register-field">
    <input matInput placeholder="Passwort bestätigen" type="password" name="password2" formControlName="password2"
      required>
      <mat-error class="mibi-register-field__error">Passwörter müssen übereinstimmen.</mat-error>
  </mat-form-field>

  <div class="mibi-register-actions">
    <button class="mibi-register-actions__button" mat-raised-button color="primary" type="submit" [disabled]="!registerForm.valid">Registrieren</button>
    <a class="mibi-register-actions__button" mat-button color="primary" [routerLink]="['/users/login']">Zurück</a>
  </div>

</form>